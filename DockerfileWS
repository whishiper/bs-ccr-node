FROM node:12.14
MAINTAINER yuxuewen <8586826@qq.com>

RUN mkdir /opt/app

COPY ./okex-ws.js /opt/app/okex-ws.js

COPY ./package-ws.json /opt/app/package.json

WORKDIR /opt/app

RUN npm install

RUN wget https://github.com/joewalnes/websocketd/releases/download/v0.3.1/websocketd-0.3.1_amd64.deb && \
    apt-get install -y ./websocketd-0.3.1_amd64.deb


EXPOSE 8080

CMD  ["/bin/sh", "-c", "websocketd --port=8080 node okex-ws.js"]