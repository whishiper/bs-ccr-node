FROM registry.cn-shenzhen.aliyuncs.com/yxw-docker/node-10.15.3-schedulerx:latest
MAINTAINER yuxuewen <8586826@qq.com>

RUN mkdir /opt/app

COPY . /opt/app

RUN rm -rf /opt/app/node_modules


WORKDIR /opt/app

RUN yarn install

ENV ENV_GROUP_ID="" \
    ENV_ENDPOINT="" \
    ENV_NAMESPACE="" \
    ENV_ALIYUN_ACCESS_KEY="" \
    ENV_ALIYUN_SECRET_KEY=""

EXPOSE 9300

CMD  ["/bin/sh", "-c", "/opt/schedulerx_conf.sh && yarn start"]