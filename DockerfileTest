FROM node:12
MAINTAINER yuxuewen <8586826@qq.com>

RUN mkdir /opt/app 

COPY . /opt/app

RUN rm -rf /opt/app/node_modules


WORKDIR /opt/app

RUN npm install

ENV acm_endpoint='' \
    acm_namespace='' \
    acm_accessKey='' \
    acm_secretKey='' \
    acm_requestTimeout=6000 \
    acm_dataId='test-egg-huobi-server' \
    acm_group='DEFAULT_GROUP'

EXPOSE 9200

CMD  ["/bin/sh", "-c", "npm run rbn-start-test"]